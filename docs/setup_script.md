# 统一安装脚本 (setup.py)

## 概述

`setup.py` 是本项目提供的跨平台安装脚本，用于简化项目环境设置过程。该脚本设计为在 Windows、macOS 和 Linux 系统上无缝运行，无需特定于平台的配置。

## 功能

脚本提供以下主要功能：

1. **环境检测**：自动检测操作系统类型和 Python 版本
2. **虚拟环境管理**：创建和配置 Python 虚拟环境
3. **依赖安装**：安装项目依赖（基本版或开发版）
4. **开发工具配置**：设置 pre-commit 钩子和其他开发工具

## 使用方法

### 基本用法

```bash
python setup.py
```

这将执行以下操作：
- 检测系统环境
- 创建虚拟环境（如果不存在）
- 安装基本项目依赖
- 提供激活虚拟环境的说明

### 安装开发版本

```bash
python setup.py --dev
```

这将安装所有开发依赖，包括测试、文档和代码质量工具。

### 静默模式

对于CI/CD环境或无需交互的情况，可以使用静默模式：

```bash
python setup.py --yes
# 或
python setup.py -y
```

这将自动确认所有提示，使脚本在无人值守模式下运行。

### 组合选项

选项可以组合使用：

```bash
python setup.py --dev --yes
```

## 工作原理

该脚本使用 Python 标准库实现跨平台兼容性：

1. **标准库依赖**：仅使用内置模块（如 `venv`、`subprocess`、`os`、`pathlib`）
2. **智能命令执行**：根据操作系统选择适当的命令执行方式
3. **彩色输出**：在支持的终端中提供彩色输出，提高可读性
4. **异常处理**：提供清晰的错误消息和故障排除建议

## 可定制性

安装脚本设计为无需修改即可使用，但如需定制，可以修改以下变量：

- `VENV_PATH`：虚拟环境的位置
- 依赖安装命令和参数

## 注意事项

- 脚本需要 Python 3.6+ 才能运行
- 使用 `--dev` 安装所有开发依赖会增加安装时间
- 在某些操作系统上，可能需要管理员/sudo权限来安装系统级依赖

## 示例输出

成功运行后，脚本将输出类似以下内容：

```
===== 环境信息 =====
操作系统: Windows 10
Python版本: 3.9.5
工作目录: C:\projects\pythonproject

===== 创建虚拟环境 =====
正在创建虚拟环境...完成!

===== 安装依赖 =====
正在安装项目依赖...
依赖安装完成!

===== 安装完成 =====
虚拟环境已创建并配置完成。
使用以下命令激活虚拟环境:

Windows (CMD): .venv\Scripts\activate.bat
Windows (PowerShell): .venv\Scripts\Activate.ps1
Unix/macOS: source .venv/bin/activate
```
